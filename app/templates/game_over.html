{% extends "base.html" %}
{% block title %}Game Over{% endblock %}
{% block content %}
<div class="content">
    <h1 class="gameHeader">ðŸŽ‰ GlÃ¼ckwunsch!</h1>
    <span class="userInputPrompt">Du hast die richtige Zahl <strong>{{ number_to_guess }}</strong> erraten!</span>
    <div class="form-container">
        {% if not score_saved %}
        <form action="{{ url_for('main.save_score_route') }}" method="post" id="saveScoreForm">
            <label for="usernameInputPrompt">Name fÃ¼r Highscore:</label>
            <input id="usernameInput" name="username" type="text" maxlength="32" placeholder="Dein Name" required />
            <div class="button-row" style="align-items: center;">
                <button type="submit" name="save" value="savename" class="saveScoreBtn">Highscore speichern</button>
            </div>
        </form>
        {% else %}
        <div class="savedNotice">Dein Highscore wurde gespeichert.</div>
        {% endif %}
        <div>   </div>
        <form action="{{ url_for('main.guess') }}" method="post" id="restartForm">
            <div class="button-row">
                <button type="submit" name="action" value="restart" class="restartBtn">Neues Spiel starten</button>
            </div>
        </form>

    </div>
  <div class="scoreboard">
        <span class="scoreboardHeader">Highscores</span>
        {% if scores and scores|length > 0 %}
            {% for u in scores %}
            <div class="scoreboardEntry">
                <span class="scoreboardEntryNumber">{{ loop.index }}.</span>
                <span class="scoreboardEntryName">{{ u.username }}</span>
                <span class="scoreboardEntryScore">{{ u.points }}</span>
            </div>
            {% endfor %}
        {% else %}
            <div class="scoreboardEntry">
                <span class="scoreboardEntryName">Noch keine Highscores.</span>
            </div>
        {% endif %}
    </div>
    <!-- <div class="adsPopup">
        <span class="adsPopupText">Hier kÃ¶nnte Ihre Werbung stehen</span>
        <button class="closePopupBtn">x</button>
    </div> -->
    <div class="recent-guesses">
        <h3>Geratene Zahlen:</h3>
        <span>{{ guesses|join(', ') }}</span>
    </div>
    <div class="scoreboard" style="opacity:0;pointer-events:none;"> <!-- hidden, for layout consistency -->
        <span class="scoreboardHeader">Highscores</span>
    </div>
</div>
{% endblock %}
